<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Model · NitrateNetworkModel.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">NitrateNetworkModel.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li class="is-active"><a class="tocitem" href="nnm.html">Basic Model</a><ul class="internal"><li><a class="tocitem" href="#Function-documentation"><span>Function documentation</span></a></li><li><a class="tocitem" href="#Results-access"><span>Results access</span></a></li></ul></li><li><a class="tocitem" href="flow_regime.html">Flow Regime</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="nnm.html">Basic Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="nnm.html">Basic Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/master/docs/src/nnm.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Nitrate-Network-Model"><a class="docs-heading-anchor" href="#Nitrate-Network-Model">Nitrate Network Model</a><a id="Nitrate-Network-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Nitrate-Network-Model" title="Permalink"></a></h1><h2 id="Function-documentation"><a class="docs-heading-anchor" href="#Function-documentation">Function documentation</a><a id="Function-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Function-documentation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="NitrateNetworkModel.StreamModel" href="#NitrateNetworkModel.StreamModel"><code>NitrateNetworkModel.StreamModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">StreamModel(
    mc::ModelConstants,
    nc::NetworkConstants,
    mv::ModelVariables
)</code></pre><p>The StreamModel structure is a wrapper around three other structures. <code>ModelConstants</code> holds values of physical and process constants that do not change during the run. <code>NetworkConstants</code> holds the specification of the links, their characteristics, and nitrate concentrations from the landscape. It will not change during the run, but is expected to be adapted for each management scenario. Finally, <code>ModelVariables</code> holds the values that are calculated during the model run. All <code>WatershedSim</code> functions will take the entire <code>StreamModel</code> as an argument, so there is no need to pull out the component structures. It is also expected that users will use the file-based constructor <a href="nnm.html#NitrateNetworkModel.StreamModel-Tuple{String, String}"><code>StreamModel(::String, ::String)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/4248fbe51ea00e1594a387fa4b06be0d895c3ed3/src/nnm.jl#L66-L83">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NitrateNetworkModel.StreamModel-Tuple{String, String}" href="#NitrateNetworkModel.StreamModel-Tuple{String, String}"><code>NitrateNetworkModel.StreamModel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">StreamModel(baseparams_file::String, network_file::String)</code></pre><p>Constructs a <a href="nnm.html#NitrateNetworkModel.StreamModel"><code>StreamModel</code></a> based on inputs in two csv files. The files should be structured as follows:</p><ul><li>baseparams_file: columns &quot;variable&quot; and &quot;value&quot;.</li><li>network_file: many more columns.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/4248fbe51ea00e1594a387fa4b06be0d895c3ed3/src/nnm_io.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NitrateNetworkModel.evaluate!-Tuple{StreamModel}" href="#NitrateNetworkModel.evaluate!-Tuple{StreamModel}"><code>NitrateNetworkModel.evaluate!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate!(model::StreamModel; qgage::Float64, contrib_n_load_reduction::Union{nothing,Array{Float64,1}})</code></pre><p>Main model function. Assumes that <code>model.nc</code> has already been updated to reflect the desired management scenario, e.g. updates to <code>model.nc.contrib_n_load_factor</code> or <code>model.nc.feature</code> and <code>model.nc.wetland_area</code>.</p><p>If a value for qgage is provided, the model will be run using that value as the flow measured at the link <code>model.nc.gage_link</code>, which is used to assign flow values to all other links. Otherwise, the model will be run using <code>model.nc.gage_flow</code>.</p><p>#TODO: the reason I&#39;m doing it this way is because the nc struct is currently immutable. I could switch it to mutable, but I&#39;ve been avoiding that due to potential performance regressions. I should test that, since this is introduces a funny assymetry in how different model parameters are handled. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/4248fbe51ea00e1594a387fa4b06be0d895c3ed3/src/nnm.jl#L91-L108">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NitrateNetworkModel.save_model_results" href="#NitrateNetworkModel.save_model_results"><code>NitrateNetworkModel.save_model_results</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">save_model_results(model::StreamModel, filename::String)</code></pre><p>Writes model results to csv file</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/4248fbe51ea00e1594a387fa4b06be0d895c3ed3/src/nnm_io.jl#L164-L168">source</a></section></article><h2 id="Results-access"><a class="docs-heading-anchor" href="#Results-access">Results access</a><a id="Results-access-1"></a><a class="docs-heading-anchor-permalink" href="#Results-access" title="Permalink"></a></h2><p>These functions give ways of extracting key results from the model structure.</p><article class="docstring"><header><a class="docstring-binding" id="NitrateNetworkModel.get_outlet_nconc" href="#NitrateNetworkModel.get_outlet_nconc"><code>NitrateNetworkModel.get_outlet_nconc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_outlet_nconc(model::StreamModel)::Float64</code></pre><p>Gets nitrate concentration leaving outlet link</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/4248fbe51ea00e1594a387fa4b06be0d895c3ed3/src/nnm.jl#L336-L340">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NitrateNetworkModel.get_avg_nconc" href="#NitrateNetworkModel.get_avg_nconc"><code>NitrateNetworkModel.get_avg_nconc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_avg_nconc(model::StreamModel)::Float64</code></pre><p>Gets link length-weighted nitrate concentration</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/4248fbe51ea00e1594a387fa4b06be0d895c3ed3/src/nnm.jl#L346-L350">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NitrateNetworkModel.get_delivery_ratios" href="#NitrateNetworkModel.get_delivery_ratios"><code>NitrateNetworkModel.get_delivery_ratios</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_delivery_ratios(model::StreamModel)::Tuple{Vector{Float64}, Vector{Float64}}</code></pre><p>Returns vectors with net delivery ratio and escape fraction for each link.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/phawthorne/NitrateNetworkModel.jl/blob/4248fbe51ea00e1594a387fa4b06be0d895c3ed3/src/nnm.jl#L359-L363">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="flow_regime.html">Flow Regime »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Monday 2 August 2021 18:27">Monday 2 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
